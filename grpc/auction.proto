syntax = "proto3";

option go_package = "auction/grpc";

package grpc;

service AuctionService {
    rpc bid(BidRequest) returns (BidResponse) {};
    rpc result(ResultRequest) returns (ResultResponse) {};
    rpc heartBeat(HeartBeatRequest) returns (HeartBeatResponse) {};
    rpc election(ElectionRequest) returns (ElectionResponse) {};
    rpc broadcastLeader(BroadcastLeaderRequest) returns (BroadcastLeaderResponse) {};
}

message BidRequest {
    string auctionName = 1;
    string bidderName = 2;
    int32 amount = 3;
    int32 timestamp = 4;
}

message BidResponse {
    string status = 1;
    int32 timestamp = 2;
}

message ResultRequest {
    string auctionName = 1;
    int32 timestamp = 2;
}

message ResultResponse {
    string status = 1;
    int32 highestBid = 2;
    string bidderName = 3;
    int32 timestamp = 4;
}

message HeartBeatRequest {}

message HeartBeatResponse {
    string status = 1;
}

message ElectionRequest {
    string id = 1;
}

message ElectionResponse {}

message BroadcastLeaderRequest {
    string leader = 1;
}

message BroadcastLeaderResponse {}
